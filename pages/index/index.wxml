<!--pages/shop/shop.wxml-->
<view class='header'>
  <view class='shop-description'>
    <view class='shop-logo'>
      <image src="{{src}}" class='shop-logo-image'></image>
    </view>
    <view class='shop-info'>
      专注之所以为师。造饭师，专注健康饮食，务求保留食材本味，忠于食材本质
    </view>
  </view>
  <view class='shop-activity'>满40减15</view>
</view>
<view class='tabBar'>
  <view class='tab'>
    <text class='text tabActive'>点菜</text>
  </view>
  <view class='tab'>
    <text class='text'>商家</text>
  </view>
</view>
<view class='foods'>
  <scroll-view scroll-y class='foods-categroy'>
    <view wx:for="{{goods}}" class='{{item.active?"categroy-item categroy-active":"categroy-item"}}' bindtap='categoryHandler' data-id='{{index}}'>
      <text class='categroy-text'>{{item.shop_goods_category_name}}</text>
    </view>
  </scroll-view>
  <scroll-view scroll-y class='foods-group' scroll-into-view='{{toView}}' scroll-with-animation='true'>
    <view class='foods-item' wx:for="{{goods}}" wx:for-index='pIndex' wx:for-item='pItem' id='{{"category"+pIndex}}'>
        <view class='group-name'>{{pItem.shop_goods_category_name}}</view>
        <view class='group-item' wx:for="{{pItem.goods_data}}">
          <view class='group-item-img'>
            <image src='{{item.image_url}}' class='group-item-pic'></image>
          </view>
          <view class='group-item-description'>
            <view class='group-item-description-title'>{{item.goods_name}}</view>
            <view class='group-item-description-digest'>{{item.description}}</view>
            <view class='group-item-order'>
              <view class='group-item-order-price'>￥{{item.goods_price}}</view>
              <view class='group-item-order-count'>
                <text class='cutIcon'  bindtap="cutCurrentFood" data-index="{{item.index}}" data-p="{{item.pIndex}}" style="{{item.uCount>0?'':'display:none'}}"></text>
                <text class='count' style="{{item.uCount>0?'':'display:none'}}">{{item.uCount}}</text>
                <text class='{{item.uCount>0?"addIcon addMoreIcon":"addIcon"}}' bindtap="addCurrentFood" data-index="{{item.index}}" data-p="{{item.pIndex}}"></text>
              </view>
            </view>
          </view>
        </view>
    </view>

  </scroll-view>
</view>
<view class='footer'>
  <view class='footer-total' bindtap='showCarPanel'>
    合计：{{totalPrice}}元
    <view class='shopping-car'>
      <image src='{{carUrl}}' class='shopping-car-img'></image>
    </view>
     <view class='shopping-car-count' style='{{totalCount>0?"":"display:none"}}'>{{totalCount}}</view>
  </view>
  <view class='footer-submit' bindtap='nextHandler'>选好了</view>
</view>

<view class='show-car' style='{{showCarPanel?"":"display:none"}}'>
  <view class='show-car-wrap'>
    <view class='show-car-title'>
      <text class='show-car-title-text'>已选餐品</text>
      <text class='delete-car-title-text'>清空购物袋</text>
    </view>
    <view class='show-car-list'>
      <view class='show-car-item' wx:for="{{carFoods}}">
        <view class='show-car-item-name'>{{item.goods_name}}</view>
        <view class='show-car-item-change'>
          <text class='show-car-item-cost'>￥{{item.uCount*item.goods_price}}</text>
          <text class='cutIconCar' bindtap='cutCarFood' data-index='{{item.index}}' data-pIndex='{{item.pIndex}}' data-eq='index'></text>
          <text class='show-car-item-count'>{{item.uCount}}</text>
          <text class='addIconCar' bindtap='addCarFood' data-index='{{item.index}}' data-pIndex='{{item.pIndex}}' data-eq='index'></text>
        </view>
      </view>
    </view>
  </view>
</view>